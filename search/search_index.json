{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"S0-docs","text":""},{"location":"#iot-gateway-for-wireless-and-wired-m-bus-metering","title":"\ud83d\udce1 IoT Gateway for Wireless and Wired M-Bus Metering","text":""},{"location":"#s0","title":"\ud83d\udcdf S0","text":""},{"location":"#overview","title":"\ud83d\ude80 Overview","text":"<p>The S0 is a robust and modular IoT Gateway for smart metering applications. The gateway is capable of collecting data from both Wireless M-Bus (wMBus) and wired M-Bus utility meters, and transmitting the collected data securely to Magistrala.</p> <p>The IoT Gateway is built around the ESP32-C6 microcontroller, leveraging its RISC-V core and integrated wireless capabilities. It supports both wireless and wired M-Bus protocols, commonly used in heat, water, and gas meters for energy monitoring in industrial and residential environments.</p>"},{"location":"#contributing","title":"\ud83e\udd1d Contributing","text":"<p>Please refer to the CONTRIBUTING.md file on how to contribute to this project.</p>"},{"location":"#license","title":"\ud83d\udcdc License","text":"<p>This project is licensed under the terms of the Apache License.</p>"},{"location":"architecture/","title":"\ud83d\udce1 S0 Board Architecture and Schematics","text":""},{"location":"architecture/#hardware-architecture","title":"HARDWARE ARCHITECTURE","text":""},{"location":"architecture/#esp32-circuit","title":"ESP32 CIRCUIT","text":""},{"location":"architecture/#sim7080g-circuit","title":"SIM7080G CIRCUIT","text":""},{"location":"architecture/#rak-3172-lora-module","title":"RAK 3172 LORA MODULE","text":""},{"location":"architecture/#wmbus-rc-s2lp-circuit","title":"WMBUS RC-S2LP CIRCUIT","text":""},{"location":"architecture/#usb-c-and-battery-connector","title":"USB-C AND BATTERY CONNECTOR","text":""},{"location":"architecture/#power-conversion-circuit","title":"POWER CONVERSION CIRCUIT","text":""},{"location":"architecture/#resistor-and-capacitor-specs","title":"RESISTOR AND CAPACITOR SPECS","text":""},{"location":"architecture/#board-frame-and-header-pins","title":"BOARD FRAME AND HEADER PINS","text":""},{"location":"baseboard-pinouts/","title":"Baseboard Pinouts","text":""},{"location":"baseboard-pinouts/#dc-header-pinout-j6","title":"DC header pinout (<code>J6</code>)","text":"Pin Name Description 1D, 1C GND Ground 2D, 2C 3V3 3.3V output 3D, 3C - Unused Pins 4D, 4C 5V 5V output 5 -- 14 - Unused Pins 15D MOSI Ethernet MOSI, SD CARD MOSI 15C MISO Ethernet MISO, SD CARD MISO 16D SCK Ethernet SCK, SD CARD SCK 17 -- 23 - Unused Pins"},{"location":"baseboard-pinouts/#dc-header-pinout-j5","title":"DC header pinout (<code>J5</code>)","text":"Pin Name Description 1B, 1A GND Ground 2 - 5 - Unused pins 6B INT Ethernet Interrupt Pin 6A CS Ethernet SPI Chip Select 7A CS SD Card Chip Select 7B, 8A - Unused pins 8B RST Ethernet Reset Pin 9 -- 18 - Unused 19B TXI M-Bus Data Out 19A RXI M-Bus Data In 20 -- 21 - Unused Pins 22 -- 23 GND GND"},{"location":"baseboard-schematics/","title":"S0 BASEBOARD SCHEMATICS","text":""},{"location":"baseboard-schematics/#ethernet-circuit","title":"ETHERNET CIRCUIT","text":""},{"location":"baseboard-schematics/#mbus-circuit","title":"MBUS CIRCUIT","text":""},{"location":"baseboard-schematics/#sd-card-circuit","title":"SD CARD CIRCUIT","text":""},{"location":"baseboard-schematics/#board-frame-and-connectors","title":"BOARD FRAME AND CONNECTORS","text":""},{"location":"baseboard-schematics/#power-circuitry","title":"POWER CIRCUITRY","text":""},{"location":"baseboard-user-description/","title":"Baseboard Start Up","text":""},{"location":"baseboard-user-description/#powering-the-board","title":"Powering the Board.","text":"<p>The Baseboard is powered by a 24V max DC power supply . The power supply is connected to the board via the Power Screw Terminal with polarity as marked on the board. Incase of reverse polarity connection the board has Reverse Polarity Protection enabled as well as Overcurrent Protection in cases of Short Circuiting.</p> <p>The Baseboard can also be powered by a battery of 7.4V and the connection done via the Battery JST connector.</p>"},{"location":"baseboard-user-description/#testing-power","title":"Testing Power.","text":"<p>Power supply to the board is converted to 5V and 3.3V by the BUck Converter and 3.3V Regulator. To test the power supply, connect a multimeter and measure the voltage at the 5V and 3.3V test points as labelled on the board.</p>"},{"location":"baseboard-user-description/#ethernet","title":"Ethernet.","text":"<p>The Baseboard has an onboard Ethernet port which can be used to connect to the internet. This is made possible by the W5500 Chip that has Auto Negotiating modes which can be configured via the Solder joints labelled on the board. Negotiation of Speed and Connection type can be Full or Half Duplex through these pins. You can set:</p> <ul> <li>10 Mbps Half-Duplex</li> <li>10 Mbps Full-Duplex</li> <li>100 Mbps Half-Duplex</li> <li>100 Mbps Full-Duplex</li> </ul>"},{"location":"baseboard-user-description/#wired-meter-bus","title":"Wired Meter Bus.","text":"<p>The Baseboard has a Wired Meter Bus which is a 2 wire interface that can be used to connect to the Wired Meter. The Wired Meter Bus is connected to the Wired Meter via the MBus Screw Terminal with its markings as shown on the board.</p>"},{"location":"baseboard-user-description/#data-storage-feature","title":"Data Storage Feature.","text":"<p>The Baseboard is also equipped with a MicroSD card slot which can be used to store MBUS data to an SD Card.</p>"},{"location":"baseboard-user-description/#how-to-use-the-baseboard","title":"How to use the Baseboard.","text":"<p>The Baseboard is meant to be used together with the S0 board. The S0 board acts like a cape to the Baseboard and is powered directly by the Baseboard. This connection is done by the 2x23 male headers on the S0 fitting onto the female headers of the Baseboard.</p>"},{"location":"features/","title":"\ud83c\udf1f Features","text":""},{"location":"features/#hardware-architecture","title":"\ud83d\udd27 Hardware Architecture","text":"<p>The gateway provides support for the following communication interfaces:</p> <ul> <li>\ud83d\udcf6 Wireless M-Bus (868 MHz) via the RC-S2LP module</li> <li>\ud83c\udf10 NB-IoT / LTE-M via the SIM7080G module for cellular connectivity</li> <li>\ud83d\udce1 LoRa (868 MHz) via the RAK3172 module for long-range, low-power communication</li> <li>\ud83c\udf0d Internet connectivity via NB-IoT, Ethernet (optional), or LoRaWAN (via backend gateway)</li> </ul> <p>The custom PCB integrates multiple communication modules and power interfaces designed for industrial deployment:</p> Component Description ESP32-C6 Main microcontroller (RISC-V, WiFi, BLE) RC-S2LP Wireless M-Bus 868 MHz transceiver RAK3172 LoRa module (868 MHz) SIM7080G NB-IoT/LTE-M module Ethernet (Optional) local network through S0 Baseboard USB-C &amp; Terminals For power and debug GNSS Support Optional via SIM7080G for asset tracking <p>The board is compact and optimized for IP-rated DIN-rail enclosures for industrial/outdoor environments. It features side-mounted SMA connectors for each antenna (WiFi, GNSS, LoRa, NB-IoT, wMBus).</p>"},{"location":"features/#software-functionality","title":"\ud83c\udf10 Software Functionality","text":"<p>The gateway firmware performs the following functions:</p> <ul> <li>Collects meter data periodically from both wired and wireless M-Bus meters.</li> <li>Transmits structured data securely to, Magistrala a remote IoT platform via MQTT.</li> <li>Manages reconnections and retry logic for unreliable NB-IoT networks.</li> <li>Logs diagnostics and status via UART or remote logging service.</li> </ul>"},{"location":"s0-baseboard/","title":"\ud83d\udcd8 S0 BaseBoard","text":""},{"location":"s0-baseboard/#features","title":"\ud83d\udd27 Features","text":"<ul> <li>Onboard W5500 Ethernet controller for wired Ethernet connectivity</li> <li>TSS721A transceiver for M-Bus communication</li> <li>Wired M-Bus connection via Screw Terminal (<code>J1</code>)</li> <li>SD Card slot for data logging</li> <li>Dual 2\u00d723-pin vertical pin sockets (<code>J5</code>, <code>J6</code>) for connecting the S0 board</li> <li>24V maximum input via Screw Terminal (<code>J2</code>)</li> <li>Battery input and onboard charging circuit via JST connector (<code>J3</code>)</li> <li>SPI and UART routed through <code>J5</code>/<code>J6</code> to communicate with the S0 board</li> <li>Protection components: diodes, inductors, capacitors for power and signal integrity</li> <li>Modular and expandable design with solder jumpers for configuration</li> </ul>"},{"location":"s0-baseboard/#connector-overview","title":"\ud83d\udd0c Connector Overview","text":"Reference Type Description <code>J2</code> JST Connector 24V DC Power Input <code>J3</code> JST Connector Battery Input and Charging <code>J5</code> 2\u00d723 Pin Female Header (2.54 mm) Main S0 interface (SPI, UART) <code>J6</code> 2\u00d723 Pin Female Header (2.54 mm) Secondary interface to S0 <code>JP2</code> Solder Jumper Config option for W5500 <code>JP3</code> Solder Jumper Config option for W5500"},{"location":"s0-baseboard/#power-system","title":"\u26a1 Power System","text":"<ul> <li>Primary Power Input: 24V via <code>J2</code></li> <li>Battery Backup: Via <code>J3</code> with charger IC circuit</li> <li>Protection: Diodes for reverse polarity, inductors for EMI</li> <li>Power Output: Supplies the connected S0 board through headers</li> </ul>"},{"location":"s0-baseboard/#communication-interfaces","title":"\ud83c\udf10 Communication Interfaces","text":"<ul> <li>W5500 Ethernet Controller:</li> <li>Provides wired network connectivity</li> <li>Communicates with the S0 via SPI</li> <li>TSS721A Transceiver:</li> <li>M-Bus driver for utility metering</li> <li>Communicates with the S0 via UART</li> <li>Header Connections:</li> <li>All SPI and UART pins routed to <code>J5</code> and <code>J6</code></li> </ul>"},{"location":"s0-baseboard/#architecture","title":"\ud83e\udde0 Architecture","text":"<p>The S0 BaseBoard serves as a cape board that powers and extends the S0 module by offering:</p> <ul> <li>Ethernet via W5500</li> <li>Wired M-Bus via TSS721A</li> <li>Power management and regulation</li> <li>Standard pin headers for seamless plug-on support</li> </ul>"},{"location":"s0-baseboard/#pcb-layout","title":"\ud83d\udcd0 PCB Layout","text":"<ul> <li>2-layer board with copper on F.Cu and B.Cu</li> <li>Board thickness: ~1.6 mm (standard FR-4)</li> <li>Modular footprint with JST and pin headers</li> </ul>"},{"location":"s0-baseboard/#applications","title":"\ud83e\udde9 Applications","text":"<ul> <li>Smart grid and smart metering infrastructure</li> <li>Industrial IoT gateway</li> <li>Prototyping platform for M-Bus over Ethernet</li> <li>Expansion base for S0 compute module</li> </ul>"},{"location":"s0-baseboard/#interface-map-to-s0","title":"\ud83d\udd04 Interface Map to S0","text":"Interface Direction Connected To SPI S0 \u2194 W5500 Network Comm UART S0 \u2194 TSS721A M-Bus Comm Power BaseBoard \u2192 S0 12V or Battery"},{"location":"s0-pinouts/","title":"S0 PINOUT","text":""},{"location":"s0-pinouts/#ba-header-pinout-j1","title":"BA Header Pinout (<code>J1</code>)","text":"Pin Name Description 1B, 1A GND Ground 2B, 2A - Unused Pins 3B MUX1 Unused Pins 3A MUX2 5V output 4B MUX3 Unused Pins 4A CS WMBUS Chip Select 5B SDN WMBUS Shut Down pin 5A CS LoRA Chip Select 6B LED Status LED 6A GPIO External GPIO 7B PWR SIM7080G Power Control 7A GPIO External GPIO 8B CS SIM7080G Chip Select 8A - Unused Pin 9B GPIO External GPIO 9A - Unused Pins 10 - 18 - Unused Pins 19B MBUS-RX MBUS Receiver Pin 19A MBUS-TX MBUS Transmitter Pin 20 - 21 - Unused Pins 22B MTCK Debug Clock 22A MTDO Debug Data Out 23B MTMS Debug Mode Select 23A MTDI Debug Data In"},{"location":"s0-pinouts/#dc-header-pinout-j2","title":"DC Header Pinout (<code>J2</code>)","text":"Pin Name Description 1D, 1C GND Ground 2D, 2C 3V3 3V3 Input/Output 3D, 3C - Unusued Pins 4D, 4C 5V 5V Input/Output 5D, 5C - Unused Pins 6D SIM7080G_TXD SIM7080G Transmit 6C - Unused Pins 7D SIM7080G_TXD SIM7080G Receive 8 - 9 - Unused Pins 10D SCL I2C Clock Pin 10C SDA I2C Data Pin 11D USB_D- Flash/Debug ESP 11C USB_D+ Flash/Debug ESP 12D - Unused Pin 12C SIM7080G_D- SIM7080G Data - 13D - Unused Pin 13C SIM7080G_D+ SIM7080G Data + 14D, 14C - Unused Pins 15D MOSI SPI MOSI 15C MISO SPI MISO 16D SCK SPI Serial Clock 16C - Unused Pin 17D - Unused Pin 17C GND Ground Pin 18 - 20 - Unused Pins 21D ESP_IO3 GPIO 21C ESP_IO2 GPIO 22 - 23 GND Ground Pins"},{"location":"s0-user-description/","title":"How do i start the S0?","text":""},{"location":"s0-user-description/#powering-the-board","title":"Powering the Board","text":"<p>S0 board ban be powered in 3 ways:</p> <ul> <li>USB-C: The board can be powered via the USB-C port. This method is for development and testing.</li> <li>Battery: The board can be powered by a battery of maximum 7.4V connected via the battery JST as labelled on the board.</li> <li>Baseboard: The board can be powered via the baseboard. S0 is connected on top of the Baseboard thereby acting like a Cape. THe Baseboard supplies both 5V and 3.3V to the S0 board.</li> </ul>"},{"location":"s0-user-description/#flashing-of-firmware","title":"Flashing of Firmware","text":"<p>The S0 board has the ESP32 C6 as its main microcontroller which can be programmed using any framework of your choice. The firmware is flashed through the USB-C connecter.</p> <p>Debug can also be done not only through the USB -C connector but also the JTAG pins as labelled on the board with its pinouts. This enables debugging both on-site and off-site.</p>"},{"location":"s0-user-description/#wieless-communication","title":"Wieless Communication","text":"<ul> <li> <p>WiFi/BLE: S0 board has ESP32 C6 that is 2.4GHz Wi-Fi and BLE enabled. Antenna connection is made possible by an IPEX connector on the ESP32 C6 with a 2.4GHz antenna of your choice.</p> </li> <li> <p>LoRA: S0 board has a LoRA module, RAK-3172 that can be used for long range wireless communication. Antenna connection is made possible by an IPEX connector on the RAK-3172 with a 868MHz antenna of your choice.</p> </li> <li> <p>Wireless Meter Bus: S0 board has a wireless meter bus module, the RC-S2LP, that can be used for wireless communication with WMBUS Meters. Antenna connection is made possible by an IPEX connector on the RC-S2LP with a 868MHz antenna of your choice.</p> </li> <li> <p>NB IoT/ LTE: S0 board has a NB-IoT/LTE module, the SIM7080G, that can be used for wireless communication with NB-IoT devices. The module has two separate antenna connections namely RF and GNSS whose IPEX connectors are marked on the board. The RF antenna is used for wireless communication while the GNSS antenna is used for GPS. The SIM7080G can be programmed by the ESP32 by sending AT commands through your firmware.</p> </li> </ul>"}]}