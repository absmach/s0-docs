{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"S0-docs","text":""},{"location":"#iot-gateway-for-wireless-and-wired-m-bus-metering","title":"\ud83d\udce1 IoT Gateway for Wireless and Wired M-Bus Metering","text":""},{"location":"#s0","title":"\ud83d\udcdf S0","text":""},{"location":"#overview","title":"\ud83d\ude80 Overview","text":"<p>The S0 is a robust and modular IoT Gateway for smart metering applications. The gateway is capable of collecting data from both Wireless M-Bus (wMBus) and wired M-Bus utility meters, and transmitting the collected data securely to Magistrala.</p> <p>The IoT Gateway is built around the ESP32-C6 microcontroller, leveraging its RISC-V core and integrated wireless capabilities. It supports both wireless and wired M-Bus protocols, commonly used in heat, water, and gas meters for energy monitoring in industrial and residential environments.</p>"},{"location":"#contributing","title":"\ud83e\udd1d Contributing","text":"<p>Please refer to the CONTRIBUTING.md file on how to contribute to this project.</p>"},{"location":"#license","title":"\ud83d\udcdc License","text":"<p>This project is licensed under the terms of the Apache License.</p>"},{"location":"architecture/","title":"\ud83d\udce1 S0 Board Architecture and Schematics","text":""},{"location":"architecture/#hardware-architecture","title":"HARDWARE ARCHITECTURE","text":""},{"location":"architecture/#esp32-circuit","title":"ESP32 CIRCUIT","text":""},{"location":"architecture/#sim7080g-circuit","title":"SIM7080G CIRCUIT","text":""},{"location":"architecture/#wmbus-rc-s2lp-circuit","title":"WMBUS RC-S2LP CIRCUIT","text":""},{"location":"architecture/#usb-c-and-battery-connector","title":"USB-C AND BATTERY CONNECTOR","text":""},{"location":"architecture/#power-conversion-circuit","title":"POWER CONVERSION CIRCUIT","text":""},{"location":"architecture/#resistor-and-capacitor-specs","title":"RESISTOR AND CAPACITOR SPECS","text":""},{"location":"architecture/#board-frame-and-header-pins","title":"BOARD FRAME AND HEADER PINS","text":""},{"location":"baseboard-pinouts/","title":"Baseboard Pinouts","text":""},{"location":"baseboard-pinouts/#dc-header-pinout-j6","title":"DC header pinout (<code>J6</code>)","text":"Pin Name Description 1D, 1C GND Ground 2D, 2C 3V3 3.3V output 3D, 3C - Unused Pins 4D, 4C 5V 5V output 5 -- 14 - Unused Pins 15D MOSI Ethernet MOSI, SD CARD MOSI 15C MISO Ethernet MISO, SD CARD MISO 16D SCK Ethernet SCK, SD CARD SCK 16C - Unused Pin 17 -- 23 - Unused Pins"},{"location":"baseboard-pinouts/#dc-header-pinout-j5","title":"DC header pinout (<code>J5</code>)","text":"Pin Name Description 1B, 1A GND Ground 2 - 5 - Unused pins 4B ETH_RST Ethernet Reset Pin 4A - Unused Pin 5B ETH_INT Ethernet Interrupt Pin 5A - Unused pins 6 -- 18 - Unused pins 19B MBUS_TXI M-Bus Data Out 19A MBUS_RXI M-Bus Data In 20 -- 21 - Unused Pins 22B ETH_CS Ethernet Chip Select 22A SD_CS SD Card Chip Select 22 -- 23 GND GND"},{"location":"baseboard-pinouts/#header-pinout-j10","title":"Header pinout (<code>J10</code>)","text":"Pin Name Description 1 3V3 3.3V Supply 2 MBUS_TX MBUS Transmitter 3 MBUS_RX MBUS Receiver 4 GND Ground"},{"location":"baseboard-schematics/","title":"S0 BASEBOARD SCHEMATICS","text":""},{"location":"baseboard-schematics/#ethernet-circuit","title":"ETHERNET CIRCUIT","text":""},{"location":"baseboard-schematics/#mbus-circuit","title":"MBUS CIRCUIT","text":""},{"location":"baseboard-schematics/#sd-card-circuit","title":"SD CARD CIRCUIT","text":""},{"location":"baseboard-schematics/#board-frame-and-connectors","title":"BOARD FRAME AND CONNECTORS","text":""},{"location":"baseboard-schematics/#power-circuitry","title":"POWER CIRCUITRY","text":""},{"location":"baseboard-user-description/","title":"Baseboard Start Up","text":""},{"location":"baseboard-user-description/#powering-the-board","title":"Powering the Board.","text":"<p>The Baseboard is powered by a 24V max DC power supply . The power supply is connected to the board via the Power Screw Terminal with polarity as marked on the board. Incase of reverse polarity connection the board has Reverse Polarity Protection enabled as well as Overcurrent Protection in cases of Short Circuiting.</p> <p>The Baseboard can also be powered by a battery of 7.4V and the connection done via the Battery JST connector.</p>"},{"location":"baseboard-user-description/#testing-power","title":"Testing Power.","text":"<p>Power supply to the board is converted to 5V and 3.3V by the BUck Converter and 3.3V Regulator. To test the power supply, connect a multimeter and measure the voltage at the 5V and 3.3V test points as labelled on the board.</p>"},{"location":"baseboard-user-description/#ethernet","title":"Ethernet.","text":"<p>The Baseboard has an onboard Ethernet port which can be used to connect to the internet. This is made possible by the W5500 Chip that has Auto Negotiating modes which can be configured via the Solder joints labelled on the board. Negotiation of Speed and Connection type can be Full or Half Duplex through these pins. You can set:</p> <ul> <li>10 Mbps Half-Duplex</li> <li>10 Mbps Full-Duplex</li> <li>100 Mbps Half-Duplex</li> <li>100 Mbps Full-Duplex</li> </ul>"},{"location":"baseboard-user-description/#wired-meter-bus","title":"Wired Meter Bus.","text":"<p>The Baseboard has a Wired Meter Bus which is a 2 wire interface that can be used to connect to the Wired Meter. The Wired Meter Bus is connected to the Wired Meter via the MBus Screw Terminal with its markings as shown on the board.</p>"},{"location":"baseboard-user-description/#data-storage","title":"Data Storage.","text":"<p>The Baseboard is also equipped with a MicroSD card slot which can be used to store MBUS data to an SD Card.</p>"},{"location":"baseboard-user-description/#how-to-use-the-baseboard","title":"How to use the Baseboard.","text":"<p>The Baseboard is meant to be used together with the S0 board. The S0 board acts like a cape to the Baseboard and is powered directly by the Baseboard. This connection is done by the 2x23 male headers on the S0 fitting onto the female headers of the Baseboard.</p>"},{"location":"coap/","title":"Connecting S0 to Magistrala via CoAP","text":""},{"location":"coap/#running-magistrala","title":"Running Magistrala","text":"<p>Ensure that Magistrala is running.</p> <p>Ensure also you are in the <code>embedded/targets/zephyr/coap</code> directory when executing the below steps</p> <p>Modify the configuration file in <code>src/config.h</code></p> <p>Start with the WiFi credentials as S0 in this case is in Station Mode.</p> <pre><code>#define WIFI_SSID \"SSID\"    // Replace `SSID` with WiFi ssid\n#define WIFI_PSK \"PASSWORD\" // Replace `PASSWORD` with Router password\n</code></pre>"},{"location":"coap/#configuring-supermq-environment-variables","title":"Configuring SuperMQ environment variables","text":"<pre><code>#define MAGISTRALA_HOSTNAME \"messaging.magistrala.absmach.eu\" // Replace with your Magistrala instance hostname or IP\n#define MAGISTRALA_COAP_PORT 5683\n#define DOMAIN_ID \"DOMAIN_ID\"         // Replace with your Domain ID\n#define CLIENT_ID \"CLIENT_ID\"         // Replace with your Client ID\n#define CLIENT_SECRET \"CLIENT_SECRET\" // Replace with your Client secret\n#define CHANNEL_ID \"CHANNEL_ID\"       // Replace with your Channel ID\n</code></pre>"},{"location":"coap/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Once you update the configuration file, build and run the code:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre>"},{"location":"coaps/","title":"Connecting S0 to Magistrala via CoAP Secure","text":""},{"location":"coaps/#running-magistrala","title":"Running Magistrala","text":"<p>Ensure that Magistrala is running.</p> <p>Ensure also you are in the <code>embedded/targets/zephyr/coaps</code> directory when executing the below steps</p> <p>Modify the configuration file in <code>src/config.h</code></p> <p>Start with the WiFi credentials as S0 in this case is in Station Mode.</p> <pre><code>#define WIFI_SSID \"SSID\"    // Replace `SSID` with WiFi ssid\n#define WIFI_PSK \"PASSWORD\" // Replace `PASSWORD` with Router password\n</code></pre>"},{"location":"coaps/#configuring-magistrala-variables","title":"Configuring Magistrala variables","text":"<pre><code>#define MAGISTRALA_HOSTNAME \"messaging.magistrala.absmach.eu\" // Replace with your Magistrala instance hostname or IP\n#define MAGISTRALA_COAPS_PORT 5684\n#define DOMAIN_ID \"DOMAIN_ID\"         // Replace with your Domain ID\n#define CLIENT_ID \"CLIENT_ID\"         // Replace with your Client ID\n#define CLIENT_SECRET \"CLIENT_SECRET\" // Replace with your Client secret\n#define CHANNEL_ID \"CHANNEL_ID\"       // Replace with your Channel ID\n</code></pre>"},{"location":"coaps/#dtls-certificate","title":"DTLS Certificate","text":"<p>To download the Magistrala CA certificate, run the following command:</p> <pre><code>openssl s_client -connect messaging.magistrala.absmach.eu:443 \\\n  -servername messaging.magistrala.absmach.eu \\\n  &lt;/dev/null | openssl x509 &gt; messaging.magistrala.absmach.eu.pem\n</code></pre> <p>Copy the certificate contents to your <code>src/ca_cert.h</code></p>"},{"location":"coaps/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Once you update the configuration file, build and run the code:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre>"},{"location":"features/","title":"\ud83c\udf1f Features","text":""},{"location":"features/#hardware-architecture","title":"\ud83d\udd27 Hardware Architecture","text":"<p>The gateway provides support for the following communication interfaces:</p> <ul> <li>\ud83d\udcf6 Wireless M-Bus (868 MHz) via the RC-S2LP module</li> <li>\ud83c\udf10 NB-IoT / LTE-M via the SIM7080G module for cellular connectivity</li> <li>\ud83c\udf0d Internet connectivity via NB-IoT, Ethernet (optional)</li> </ul> <p>The custom PCB integrates multiple communication modules and power interfaces designed for industrial deployment:</p> Component Description ESP32-C6 Main microcontroller (RISC-V, WiFi, BLE) RC-S2LP Wireless M-Bus 868 MHz transceiver SIM7080G NB-IoT/LTE-M module Ethernet (Optional) local network through S0 Baseboard USB-C &amp; Terminals For power and debug GNSS Support Optional via SIM7080G for asset tracking <p>The board is compact and optimized for IP-rated DIN-rail enclosures for industrial/outdoor environments. It features side-mounted IPEX connectors for each antenna (WiFi, GNSS, NB-IoT, wMBus).</p>"},{"location":"features/#software-functionality","title":"\ud83c\udf10 Software Functionality","text":"<p>The gateway firmware performs the following functions:</p> <ul> <li>Collects meter data periodically from both wired and wireless M-Bus meters.</li> <li>Transmits structured data securely to, Magistrala, a remote IoT platform via MQTT.</li> <li>Manages reconnections and retry logic for unreliable NB-IoT networks.</li> <li>Logs diagnostics and status via UART or remote logging service.</li> </ul>"},{"location":"http/","title":"Connecting S0 to SuperMQ via HTTP","text":""},{"location":"http/#running-magistrala","title":"Running Magistrala","text":"<p>Ensure that Magistrala is running in your browser.</p> <p>Ensure also you are in the <code>embedded/targets/zephyr/http</code> directory when executing the below steps</p> <p>Modify the configuration file in <code>src/config.h</code></p> <p>Start with the WiFi creedntials as S0 in this case is in Station Mode.</p> <pre><code>#define WIFI_SSID \"SSID\"    // Replace `SSID` with WiFi ssid\n#define WIFI_PSK \"PASSWORD\" // Replace `PASSWORD` with Router password\n</code></pre>"},{"location":"http/#configuring-magistrala-variables","title":"Configuring Magistrala variables","text":"<pre><code>#define MAGISTRALA_HOSTNAME \"messaging.magistrala.absmach.eu\" // Replace with your Magistrala instance hostname or IP\n#define MAGISTRALA_HTTP_PORT 80\n#define DOMAIN_ID \"DOMAIN_ID\"         // Replace with your Domain ID\n#define CLIENT_ID \"CLIENT_ID\"         // Replace with your Client ID\n#define CLIENT_SECRET \"CLIENT_SECRET\" // Replace with your Client secret\n#define CHANNEL_ID \"CHANNEL_ID\"       // Replace with your Channel ID\n</code></pre>"},{"location":"http/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Once you update the configuration file, build and run the code:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre>"},{"location":"https/","title":"Connecting S0 to Magistrala via HTTPS","text":""},{"location":"https/#running-magistrala","title":"Running Magistrala","text":"<p>Ensure that Magistrala is running.</p> <p>Ensure also you are in the <code>embedded/targets/zephyr/https</code> directory when executing the below steps.</p> <p>Modify the configuration file in <code>src/config.h</code></p> <p>Start with the WiFi credentials as S0 in this case is in Station Mode.</p> <pre><code>#define WIFI_SSID \"SSID\"    // Replace `SSID` with WiFi ssid\n#define WIFI_PSK \"PASSWORD\" // Replace `PASSWORD` with Router password\n</code></pre>"},{"location":"https/#configuring-magistrala-variables","title":"Configuring Magistrala variables","text":""},{"location":"https/#standard-tls","title":"Standard TLS","text":"<pre><code>#define MAGISTRALA_HOSTNAME \"messaging.magistrala.absmach.eu\" // Replace with your Magistrala instance hostname\n#define MAGISTRALA_HTTPS_PORT 443\n#define DOMAIN_ID \"DOMAIN_ID\"         // Replace with your Domain ID\n#define CLIENT_ID \"CLIENT_ID\"         // Replace with your Client ID\n#define CLIENT_SECRET \"CLIENT_SECRET\" // Replace with your Client secret\n#define CHANNEL_ID \"CHANNEL_ID\"       // Replace with your Channel ID\n</code></pre>"},{"location":"https/#tls-certificate","title":"TLS Certificate","text":"<p>To download the Magistrala CA certificate, run the following command:</p> <pre><code>openssl s_client -connect messaging.magistrala.absmach.eu:443 \\\n  -servername messaging.magistrala.absmach.eu \\\n  &lt;/dev/null | openssl x509 &gt; messaging.magistrala.absmach.eu.pem\n</code></pre> <p>Copy the certificate contents to your <code>src/ca_cert.h</code></p>"},{"location":"https/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Once you update the configuration file, build and run the code:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre>"},{"location":"mqtt/","title":"Connecting S0 to Magistrala via MQTT","text":""},{"location":"mqtt/#running-magistrala","title":"Running Magistrala","text":"<p>Ensure that Magistrala is running in your browser.</p> <p>Ensure also you are in the <code>embedded/targets/zephyr/mqtt</code> directory when executing the below steps</p> <p>Modify the configuration file in <code>src/config.h</code></p> <p>Start with the WiFi creedntials as S0 in this case is in Station Mode.</p> <pre><code>#define WIFI_SSID \"SSID\"    // Replace `SSID` with WiFi ssid\n#define WIFI_PSK \"PASSWORD\" // Replace `PASSWORD` with Router password\n</code></pre>"},{"location":"mqtt/#configuring-magistrala-variables","title":"Configuring Magistrala variables","text":"<pre><code>#define MAGISTRALA_HOSTNAME \"messaging.magistrala.absmach.eu\" // Replace with your Magistrala instance hostname or IP\n#define MAGISTRALA_MQTT_PORT 1883\n#define DOMAIN_ID \"DOMAIN_ID\"         // Replace with your Domain ID\n#define CLIENT_ID \"CLIENT_ID\"         // Replace with your Client ID\n#define CLIENT_SECRET \"CLIENT_SECRET\" // Replace with your Client secret\n#define CHANNEL_ID \"CHANNEL_ID\"       // Replace with your Channel ID\n</code></pre>"},{"location":"mqtt/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Once you update the configuration file, build and run the code:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre>"},{"location":"mqtts/","title":"Connecting S0 to Magistrala via MQTTS","text":""},{"location":"mqtts/#running-magistrala","title":"Running Magistrala","text":"<p>Ensure that Magistrala is running.</p> <p>Ensure also you are in the <code>embedded/targets/zephyr/mqtts</code> directory when executing the below steps</p> <p>Modify the configuration file in <code>src/config.h</code></p> <p>Start with the WiFi credentials as S0 in this case is in Station Mode.</p> <pre><code>#define WIFI_SSID \"SSID\"    // Replace `SSID` with WiFi ssid\n#define WIFI_PSK \"PASSWORD\" // Replace `PASSWORD` with Router password\n</code></pre>"},{"location":"mqtts/#configuring-magistrala-variables","title":"Configuring Magistrala variables","text":""},{"location":"mqtts/#standard-tls","title":"Standard TLS","text":"<pre><code>/* Magistrala Configuration */\n#define MAGISTRALA_HOSTNAME \"messaging.magistrala.absmach.eu\" // Replace with your Magistrala instance hostname or IP\n#define MAGISTRALA_MQTTS_PORT 8883\n#define DOMAIN_ID \"DOMAIN_ID\"         // Replace with your Domain ID\n#define CLIENT_ID \"CLIENT_ID\"         // Replace with your Client ID\n#define CLIENT_SECRET \"CLIENT_SECRET\" // Replace with your Client secret\n#define CHANNEL_ID \"CHANNEL_ID\"       // Replace with your Channel ID\n</code></pre>"},{"location":"mqtts/#tls-certificate","title":"TLS Certificate","text":"<p>To download the Magistrala CA certificate, run the following command:</p> <pre><code>openssl s_client -connect messaging.magistrala.absmach.eu:443 \\\n  -servername messaging.magistrala.absmach.eu \\\n  &lt;/dev/null | openssl x509 &gt; messaging.magistrala.absmach.eu.pem\n</code></pre> <p>Copy the certificate contents to your <code>src/ca_cert.h</code></p>"},{"location":"mqtts/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Once you update the configuration file, build and run the code:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre>"},{"location":"s0-baseboard/","title":"\ud83d\udcd8 S0 BaseBoard","text":""},{"location":"s0-baseboard/#features","title":"\ud83d\udd27 Features","text":"<ul> <li>Onboard W5500 Ethernet controller for wired Ethernet connectivity</li> <li>TSS721A transceiver for M-Bus communication</li> <li>Wired M-Bus connection via Screw Terminal (<code>J1</code>)</li> <li>SD Card slot for data logging</li> <li>Dual 2\u00d723-pin vertical pin sockets (<code>J5</code>, <code>J6</code>) for connecting the S0 board</li> <li>24V maximum input via Screw Terminal (<code>J2</code>)</li> <li>Battery input and onboard charging circuit via JST connector (<code>J3</code>)</li> <li>SPI and UART routed through <code>J5</code>/<code>J6</code> to communicate with the S0 board</li> <li>Protection components: diodes, inductors, capacitors for power and signal integrity</li> <li>Modular and expandable design with solder jumpers for configuration</li> </ul>"},{"location":"s0-baseboard/#connector-overview","title":"\ud83d\udd0c Connector Overview","text":"Reference Type Description <code>J2</code> JST Connector 24V DC Power Input <code>J3</code> JST Connector Battery Input and Charging <code>J5</code> 2\u00d723 Pin Female Header (2.54 mm) Main S0 interface (SPI, UART) <code>J6</code> 2\u00d723 Pin Female Header (2.54 mm) Secondary interface to S0 <code>JP2</code> Solder Jumper Config option for W5500 <code>JP3</code> Solder Jumper Config option for W5500"},{"location":"s0-baseboard/#power-system","title":"\u26a1 Power System","text":"<ul> <li>Primary Power Input: 24V via <code>J2</code></li> <li>Battery Backup: Via <code>J3</code> with charger IC circuit</li> <li>Protection: Diodes for reverse polarity, inductors for EMI</li> <li>Power Output: Supplies the connected S0 board through headers</li> </ul>"},{"location":"s0-baseboard/#communication-interfaces","title":"\ud83c\udf10 Communication Interfaces","text":"<ul> <li>W5500 Ethernet Controller:</li> <li>Provides wired network connectivity</li> <li>Communicates with the S0 via SPI</li> <li>TSS721A Transceiver:</li> <li>M-Bus driver for utility metering</li> <li>Communicates with the S0 via UART</li> <li>Header Connections:</li> <li>All SPI and UART pins routed to <code>J5</code> and <code>J6</code></li> </ul>"},{"location":"s0-baseboard/#architecture","title":"\ud83e\udde0 Architecture","text":"<p>The S0 BaseBoard serves as a cape that powers and extends the S0 module by offering:</p> <ul> <li>Ethernet via W5500</li> <li>Wired M-Bus via TSS721A</li> <li>Power management and regulation</li> <li>Standard pin headers for seamless plug-on support</li> </ul>"},{"location":"s0-baseboard/#pcb-layout","title":"\ud83d\udcd0 PCB Layout","text":"<ul> <li>4-layer board with copper on F.Cu and B.Cu</li> <li>Board thickness: ~1.6 mm (standard FR-4)</li> <li>Modular footprint with JST and pin headers</li> </ul>"},{"location":"s0-baseboard/#applications","title":"\ud83e\udde9 Applications","text":"<ul> <li>Smart grid and smart metering infrastructure</li> <li>Industrial IoT gateway</li> <li>Prototyping platform for M-Bus over Ethernet</li> <li>Expansion base for S0 compute module</li> </ul>"},{"location":"s0-baseboard/#interface-map-to-s0","title":"\ud83d\udd04 Interface Map to S0","text":"Interface Direction Connected To SPI S0 \u2194 W5500 Network Comm UART S0 \u2194 TSS721A M-Bus Comm Power BaseBoard \u2192 S0 5V or Battery"},{"location":"s0-pinouts/","title":"S0 PINOUT","text":""},{"location":"s0-pinouts/#ba-header-pinout-j1","title":"BA Header Pinout (<code>J1</code>)","text":"Pin Name Description 1B, 1A GND Ground 2B, 2A - Unused Pins 3B SIM7080G_D+ SIM7080G Data + 3A SIM7080G_D- SIM7080G Data - 4B ETH_RST Ethernet Reset pin 4A WMBUS_CS WMBUS Chip Select 5B ETH_INT Ethernet Interrupt pin 5A ESP_IO8 External GPIO 6B - Unused Pins 6A ESP_IO19 External GPIO 7B SIM7080G_PWR SIM7080G Power Control 7A ESP_IO15 External GPIO 8 - 18 - Unused Pins 19B MBUS-RX MBUS Receiver Pin 19A MBUS-TX MBUS Transmitter Pin 20 - 21 - Unused Pins 22B MTCK / ETH_CS Debug Clock / Ethernet Chip Select 22A MTDO / SD_CS Debug Data Out / SD Cardchip select 23B MTMS Debug Mode Select 23A MTDI Debug Data In"},{"location":"s0-pinouts/#dc-header-pinout-j2","title":"DC Header Pinout (<code>J2</code>)","text":"Pin Name Description 1D, 1C GND Ground 2D, 2C 3V3 3V3 Input/Output 3D, 3C - Unusued Pins 4D, 4C 5V 5V Input/Output 5D, 5C - Unused Pins 6D SIM7080G_TXD SIM7080G Transmit 6C - Unused Pins 7D SIM7080G_TXD SIM7080G Receive 8 - 9 - Unused Pins 10D SCL I2C Clock Pin 10C SDA I2C Data Pin 11D USB_D- Flash/Debug ESP 11C USB_D+ Flash/Debug ESP 12D - Unused Pin 12C SIM7080G_D- SIM7080G Data - 13D - Unused Pin 13C SIM7080G_D+ SIM7080G Data + 14D, 14C - Unused Pins 15D MOSI SPI MOSI 15C MISO SPI MISO 16D SCK SPI Serial Clock 16C - Unused Pin 17D - Unused Pin 17C GND Ground Pin 18 - 20 - Unused Pins 21D ESP_IO1 GPIO 21C ESP_IO0 GPIO 22 - 23 GND Ground Pins"},{"location":"s0-user-description/","title":"How do i start the S0?","text":""},{"location":"s0-user-description/#powering-the-board","title":"Powering the Board","text":"<p>S0 board ban be powered in 3 ways:</p> <ul> <li>USB-C: The board can be powered via the USB-C port. This method is for development and testing.</li> <li>Power JST: The board can be powered by a battery of maximum 7.4V connected via the battery JST as labelled on the board.</li> <li>Baseboard: The board can be powered via the baseboard. S0 is connected on top of the Baseboard thereby acting like a Cape. THe Baseboard supplies both 5V and 3.3V to the S0 board.</li> </ul>"},{"location":"s0-user-description/#flashing-of-firmware","title":"Flashing of Firmware","text":"<p>The S0 board has the ESP32 C6 as its main microcontroller which can be programmed using any framework of your choice. The firmware is flashed through the USB-C connecter.</p> <p>Debug can also be done not only through the USB -C connector but also the JTAG pins as labelled on the board with its pinouts. This enables debugging both on-site and off-site.</p>"},{"location":"s0-user-description/#wieless-communication","title":"Wieless Communication","text":"<ul> <li> <p>WiFi/BLE: S0 board has ESP32 C6 that is 2.4GHz Wi-Fi and BLE enabled. Antenna connection is made possible by an IPEX connector on the ESP32 C6 with a 2.4GHz antenna of your choice.</p> </li> <li> <p>Wireless Meter Bus: S0 board has a wireless meter bus module, the RC-S2LP, that can be used for wireless communication with WMBUS Meters. Antenna connection is made possible by an IPEX connector on the RC-S2LP with a 868MHz antenna of your choice.</p> </li> <li> <p>NB IoT/ LTE: S0 board has a NB-IoT/LTE module, the SIM7080G, that can be used for wireless communication with NB-IoT devices. The module has two separate antenna connections namely RF and GNSS whose IPEX connectors are marked on the board. The RF antenna is used for wireless communication while the GNSS antenna is used for GPS. The SIM7080G can be programmed by the ESP32 by sending AT commands through your firmware.</p> </li> </ul>"},{"location":"software-getting-started/","title":"Getting Started","text":""},{"location":"software-getting-started/#development-environment","title":"Development Environment","text":"<p>To program and build firmware for the S0 board, you need to install Zephyr OS. Zephyr can be downloaded and set up from the official website:</p> <p>\ud83d\udc49 https://zephyrproject.org</p> <p>Zephyr provides:</p> <ul> <li>Hardware abstraction for ESP32-C6 peripherals</li> <li>Real-time task scheduling</li> <li>Networking and protocol stacks</li> <li>Secure communication and TLS support</li> </ul> <p>Once Zephyr is installed, you can build and flash applications directly to the S0 board using standard Zephyr tools such as <code>west</code>.</p>"},{"location":"software-getting-started/#codebase-setup","title":"Codebase Setup","text":"<p>Zephyr code for the various protocols can be accessed by cloning Embedded Repository</p>"},{"location":"software-getting-started/#magistrala-setup","title":"Magistrala Setup","text":"<ul> <li> <p>Start by navigating to Magistrala and signing up.</p> </li> <li> <p>Create a domain, channel and client.</p> </li> <li> <p>Connect the client to the channel you created.</p> </li> <li> <p>From these will you get the <code>CHANNELID</code>, <code>DOMAINID</code>, <code>CLIENTID</code> and <code>CLIENTSECRET</code></p> </li> </ul>"},{"location":"software-overview/","title":"S0 Software Overview","text":""},{"location":"software-overview/#introduction","title":"Introduction","text":"<p>The S0 is an IoT gateway board built around the ESP32-C6 microcontroller, based on the RISC-V architecture. It is designed for versatile connectivity, efficiency, and secure communication with cloud-based IoT platforms.</p> <p>The board runs on the Zephyr Real-Time Operating System (RTOS), offering stability, modularity, and scalability for embedded applications. Zephyr provides extensive hardware abstraction and a unified development framework for ESP32-C6 and other architectures.</p>"},{"location":"software-overview/#communication-protocols","title":"Communication Protocols","text":"<p>The S0 board supports a variety of IoT communication protocols. These enable secure and efficient data transfer between the device and cloud services.</p> Protocol Security Description Reference MQTT \u2717 Lightweight messaging protocol for IoT data exchange. GitHub: MQTT Example MQTTS \u2713 Secure MQTT communication over TLS (mTLS supported). GitHub: MQTTS Example CoAP \u2717 REST-based protocol optimized for constrained devices. GitHub: CoAP Example CoAP DTLS \u2713 Secure CoAP communication using DTLS encryption. GitHub: CoAP-DTLS Example HTTP \u2717 Standard web communication protocol. GitHub: HTTP Example HTTPS \u2713 Secure version of HTTP over TLS. GitHub: HTTPS Example WebSockets \u2713 Full-duplex communication protocol over TCP. GitHub: WebSockets Example <p>Each communication example repository contains setup guides, sample code, and instructions for integration with Zephyr.</p>"},{"location":"software-overview/#summary","title":"Summary","text":"<p>The S0 board combines Zephyr\u2019s robust RTOS capabilities with modern communication stacks and secure connectivity features. Its compatibility with Magistrala/SuperMQ enables seamless data flow between hardware and cloud, empowering developers to build scalable, secure, and efficient IoT systems.</p>"},{"location":"uploading-code/","title":"Uploading Code","text":"<p>Before uplaoding any code, be sure to have activated a virtual environment as guided in the Zephyr documentation.</p> <p>Download and install the binary blobs that the Espressif HAL needs by running:</p> <pre><code>west blob fetch hal_espressif\n</code></pre> <p>After cloning the embedded Repository, move to the directory with the Zephyr code for all the protocols.</p> <pre><code>cd /embedded/targets/zephyr\nls\n</code></pre> <p>Choose the protocol you want to communicate over by moving into that directory.</p> <p>Make sure to observe these files in your current directory:</p> <pre><code>CMakeLists.txt\nprj.conf\nsrc\n</code></pre> <p>Change the variable in config file in <code>src/config.h</code> to be same with your SuperMQ environment variables ie <code>CLIENTID</code>, <code>CLIENTSECRET</code>, <code>DOMAINID</code>, <code>CHANNELID</code>.</p> <p>Do this for all the variables in the config file.</p> <p>Build the code using the command:</p> <pre><code>west build -p always -b esp32c6_devkitc\n</code></pre> <p>The board parameter can be changed to whichever board you are using as long as it is recognized by Zephyr. For more information, check Zephyr supported boards</p> <p>To upload code to the S0 and monitor the serial output:</p> <pre><code>west flash\nwest espressif monitor\n</code></pre>"},{"location":"websockets/","title":"Connecting S0 to Magistrala via WebSockets","text":""},{"location":"websockets/#running-magistrala","title":"Running Magistrala","text":"<p>Ensure that Magistrala is running in your browser.</p> <p>Ensure also you are in the <code>embedded/targets/zephyr/websocket</code> directory when executing the below steps</p> <p>Modify the configuration file in <code>src/config.h</code></p> <p>Start with the WiFi credentials as S0 in this case is in Station Mode.</p> <pre><code>#define WIFI_SSID \"SSID\"    // Replace `SSID` with WiFi ssid\n#define WIFI_PSK \"PASSWORD\" // Replace `PASSWORD` with Router password\n</code></pre>"},{"location":"websockets/#configuring-magistrala-variables","title":"Configuring Magistrala variables","text":"<pre><code>#define MAGISTRALA_HOSTNAME \"messaging.magistrala.absmach.eu\" // Replace with your Magistrala instance hostname or IP\n#define MAGISTRALA_WS_PORT 8186\n#define DOMAIN_ID \"DOMAIN_ID\"         // Replace with your Domain ID\n#define CLIENT_ID \"CLIENT_ID\"         // Replace with your Client ID\n#define CLIENT_SECRET \"CLIENT_SECRET\" // Replace with your Client secret\n#define CHANNEL_ID \"CHANNEL_ID\"       // Replace with your Channel ID\n</code></pre>"},{"location":"websockets/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Once you update the configuration file, build and run the code:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre>"},{"location":"wifi/","title":"Connecting S0 to WiFi","text":"<p>Since S0 is based on ESP32C6 which has WiFi capabilities, it can be configured in Station Mode or Access Point Mode.</p> <p>Ensure you are in the <code>embedded/targets/zephyr/m0-wifi</code> directory</p>"},{"location":"wifi/#access-point-mode","title":"Access Point Mode","text":"<p>To configure the S0 as an access point, configure the parameters in <code>src/config.h</code> to your preference.</p> <p>Set parameters like <code>WIFI_AP_SSID</code> and <code>WIFI_AP_PSK</code> to your preference. An example being:</p> <pre><code>/* AP Mode Configuration */\n#define WIFI_AP_SSID       \"M0-AP\"\n#define WIFI_AP_PSK        \"\"\n#define WIFI_AP_IP_ADDRESS \"192.168.4.1\"\n#define WIFI_AP_NETMASK    \"255.255.255.0\"\n</code></pre>"},{"location":"wifi/#station-mode","title":"Station Mode","text":"<p>To configure S0 in station mode, configure the WiFi ssid and password as shown in <code>src/config.h</code></p> <pre><code>/* STA Mode Configuration */\n#define WIFI_SSID \"SSID\"     /* Replace `SSID` with WiFi ssid. */\n#define WIFI_PSK  \"PASSWORD\" /* Replace `PASSWORD` with Router password. */\n</code></pre>"},{"location":"wifi/#bulding-and-flashing-code","title":"Bulding and Flashing Code","text":"<p>Build the code and upload it to S0:</p> <pre><code>west build -p always -b esp32c6_devkitc\nwest flash\nwest espressif monitor\n</code></pre> <p>See the logs from the Serial Monitor to check whether S0 is connected.</p>"}]}